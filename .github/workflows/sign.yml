name: HaiDan Check-in

on:
  schedule:
    - cron: '0 2,10,18 * *'  # UTC 时间，每天三次（对应国内凌晨2点、上午10点、晚上4点）
  workflow_dispatch:  # 支持手动触发
  push:

jobs:
  checkin:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run script
        env:
          HAIDAN_UID: ${{ secrets.HAIDAN_UID }}
          HAIDAN_PASS: ${{ secrets.HAIDAN_PASS }}
          HAIDAN_LOGIN: ${{ secrets.HAIDAN_LOGIN }}
          HAIDAN_SSL: ${{ secrets.HAIDAN_SSL }}
          HAIDAN_TRACKER_SSL: ${{ secrets.HAIDAN_TRACKER_SSL }}
          HAIDAN_MULTI: ${{ secrets.HAIDAN_MULTI }}
          HAIDAN_PRIVACY: ${{ secrets.HAIDAN_PRIVACY }}
        run: python main.py
